<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.0.3/d3.min.js"></script>

<script>
    mermaid.initialize({
        startOnLoad: false,
        securityLevel: 'loose'
    });

    window.onload = function() {
        const elements = document.getElementsByClassName("lang-mermaid");
        let index = 0;

        while(elements.length !== 0) {
            let element = elements[0];
            mermaid.render('graph'+index, element.innerText, (svgGraph) => {
                element.parentElement.outerHTML = "<div class='mermaid'>" + svgGraph + "</div>";
            });
            ++index;
        }
    }
</script>

<style>

</style>

<script>
    window.addEventListener('load', function () {
        var svgs = d3.selectAll(".mermaid svg");
        svgs.each(function() {
            var svg = d3.select(this);
            svg.html("<g>" + svg.html() + "</g>");
            var inner = svg.select("g");
            var zoom = d3.zoom().on("zoom", function(event) {
                inner.attr("transform", event.transform);
            });
            svg.call(zoom);
        });
    });
</script>